<!doctype html>
<html>
<!-- ////////////////////////////////////////////////////////////////// 

@brantwills | github.com/brantwills

////////////////////////////////////////////////////////////////// -->
<head>
    <meta charset="utf-8">
    <title>tnsnamer</title>
    <meta name="description" content="TNSNames.ora Syntax and Modification Tool">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" />
    <link href="css/tns.css" rel="stylesheet" />
</head>

<body ng-app="app-tns" ng-controller="tnsController" ng-cloak>










    <!-- ////////////////////////////////////////////////////////////////// -->
    <!-- Heading Area -->
    <!-- ////////////////////////////////////////////////////////////////// -->
    <div class="jumbotron" ng-class="file ? 'jumbo-sm' : 'jumbo-lg'">
        <div class="container">

            <h1 ng-hide="file"> 
                tnsnamer 
                <span class="small text-muted">for tnsnames.ora</span>  
            </h1>

            <!-- ////////////////////////////////////////////////////////////////// -->
            <!-- File Drop Zone-->
            <!-- ////////////////////////////////////////////////////////////////// -->
            <div id="drop" drop-area on-parse="ParseFile(files)">
                <div ng-hide="file" class="zone-lg">
                    <span class="glyphicon glyphicon-lg glyphicon-cloud-download"></span>
                    drop tnsnames.ora here-ish
                </div>
                <div ng-show="file" class="zone-sm">
                    <span class="glyphicon glyphicon-cloud-download"></span>
                    tnsnamer: drop another file as needed
                </div>
            </div>

            <!-- ////////////////////////////////////////////////////////////////// -->
            <!-- Program Errors-->
            <!-- ////////////////////////////////////////////////////////////////// -->
            <div ng-show="errors" class="alert alert-danger">
                <strong>
                    <span class="glyphicon glyphicon-exclamation-sign"></span>
                    {{errors}}
                </strong>
            </div>
        </div>
    </div>











    <!-- ////////////////////////////////////////////////////////////////// -->
    <!-- File of Interest-->
    <!-- ////////////////////////////////////////////////////////////////// -->
    <div ng-show="file" class="wrapper-file">
        <div class="container">
            <h3>
                {{file.name}}
            </h3>
            <div>

                <span class="glyphicon glyphicon-calendar"></span>
                <span title="Last Modified Date">{{file.lastModifiedDate | date}}</span>

                <span class="glyphicon glyphicon-hdd glyphicon-pd-left"></span>
                <span title="File Size">{{file.size | bytes}}</span>

                <!--

                <span class="glyphicon glyphicon-exclamation-sign glyphicon-pd-left"></span>
                <span title="Parse Errors">{{parseErrors.length}} Errors</span>

                <span class="glyphicon glyphicon-list glyphicon-pd-left"></span>
                <span title="TNS Entries">{{entries.length}} Entries</span>

                -->
            </div>
        </div>
    </div>











    <!-- ////////////////////////////////////////////////////////////////// -->
    <!-- About -->
    <!-- ////////////////////////////////////////////////////////////////// -->
    <div class="wrapper-about" ng-hide="file">
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <div class="well">
                        <h4>What should I do and why use this?</h4>
                        <hr/>
                        <p>
                            This application explores large tnsnames.ora files which can often become unmanageable or disconnected.
                            Once you have located your tnsname.ora you can drop the file in the area above.
                            The file is then parsed and exposed in the browser.
                        </p>
                        <p>
                            Look, tnsnames.ora files are pretty boring, but this application can explore files in a few ways:
                            If you are experiencing syntax issues with your tnsnames.ora file or
                            if you are interested in sorting your tns entries. 
                        </p>
                        <p>
                            Please note, <strong>no data is sent to a server</strong>, a large goal of this application is to keep the text local.
                        </p>
                    </div>
                    <div class="well">

                        <h4>How does it work?</h4>
                        <hr/>
                        <p>
                            The heart of this application is an Antlr4 tnsnames.ora parser. Thankfully Antlr4 has a javascript 'grammar' export ability which this application leverages to determine any possible syntax issues and allows for examining each tnsnames.ora attribute.  This is present to you the user for whatever purpose you have.
                        </p>
                        <p>
                            A special thanks goes out to all those who have developed the 
                            <a tarbet="_blank" href="https://github.com/drforr/perl6-ANTLR4/blob/master/corpus/tnsnames.g4">
                                tnsnames.g4
                            </a> 
                            Antlr4 grammar. This is a rule definition file for the Antlr4 parser.
                        </p>
                    </div>
                </div>

                <div class="col-sm-6">

                    <div class="well">
                        <h4>What is a tnsnames.ora file?</h4>
                        <hr/>
                        <p>
                            The tnsnames.ora file is a configuration file that contains net service names mapped to connect descriptors for the local naming method, or net service names mapped to listener protocol addresses.
                        </p>
                        <p>
                            A net service name is an alias mapped to a database network address contained in a connect descriptor. A connect descriptor contains the location of the listener through a protocol address and the service name of the database to which to connect. Clients and database servers use the net service name when making a connection with an application.
                        </p>
                        <p>
                            By default, tnsnames.ora is located in the <code>$ORACLE_HOME/network/admin</code> directory on UNIX operating systems and in the <code>%ORACLE_HOME%\network\admin</code> directory on Windows operating systems.
                        </p>
                    </div>


                    <div class="well">
                        <h4>Resources</h4>
                        <hr/>
                        <ul class="list-unstyled">
                            <li> Antlr4 </li>
                            <li> 
                                <a title="tnsnames.g4" tarbet="_blank" href="https://github.com/drforr/perl6-ANTLR4/blob/master/corpus/tnsnames.g4">
                                    tnsnames.g4
                                </a> 
                            </li>
                            <li>
                                <a title="tns syntax" target="_blank" href="https://docs.oracle.com/cd/A57673_01/DOC/net/doc/NWUS233/apb.htm">
                                    Contents of the Configuration Files
                                </a>
                            </li>
                            <li>
                                <a title="" target="_blank" href="https://docs.oracle.com/cd/B28359_01/network.111/b28317/tnsnames.htm">
                                    Database Net Services Reference
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>





    <!-- ////////////////////////////////////////////////////////////////// -->
    <!-- Search and Filter -->
    <!-- ////////////////////////////////////////////////////////////////// -->
    <div class="wrapper-filter" ng-show="entries">
        <div class="container">
            <div class="row">
                <div class="col-sm-8">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-search"></span>
                        </span>
                        <input type="text" class="form-control" placeholder="Search for..." ng-model="search">
                        <span class="input-group-addon" ng-click="ClearSearch();">
                            <span class="glyphicon glyphicon-remove"></span>
                        </span>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-sort-by-alphabet"></span>
                        </span>
                        <select class="form-control" ng-model="sort">
                            <option value="">Sort By...</option>
                            <option ng-repeat="key in entryKeys">
                                {{key}}
                            </option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>








    <!-- ////////////////////////////////////////////////////////////////// -->
    <!-- Parsing Syntax Errors-->
    <!-- ////////////////////////////////////////////////////////////////// -->
    <div class="wrapper-parseErrors" ng-show="parseErrors.length">
        <div class="container">
            <div class="well">
                <h4>
                    <span class="glyphicon glyphicon-exclamation-sign"></span>
                    {{parseErrors.length}} 
                    Possible Syntax Errors
                </h4>
                <hr/>
                <ul class="list-unstyled"> 
                    <li ng-repeat="error in parseErrors" class="text-danger"> 
                        <b>Entry {{error.alias}}</b>,
                        Line {{error.line}} Column {{error.column}}:
                        <i>{{error.msg}}</i>
                    </li>
                </ul>
            </div>
        </div>
    </div>








    <!-- ////////////////////////////////////////////////////////////////// -->
    <!-- Parsed Entries-->
    <!-- ////////////////////////////////////////////////////////////////// -->
    <div class="wrapper-entries" ng-show="entries">
        <div class="container">
            <div ng-repeat="entry in entries | filter: search | orderBy: sort" class="entryRow">
                    <h4>
                        {{entry.alias}}
                    </h4> 
                    <ul class="list-unstyled">
                        <li ng-show="entry.host"> 
                            <i>Host: {{entry.host}}</i>
                        </li>
                        <li> 
                            <span ng-click="showAttributes = !showAttributes">
                                Show All Attributes
                            </span>
                        </li>
                    </ul>
                    <div ng-show="showAttributes">
                        <hr/>
                        <ul class="list-unstyled" >
                             <li ng-repeat="key in entryKeys" ng-show="entry[key] && entry[key].indexOf('=)') == -1">
                                {{key}}: {{entry[key]}}
                            </li>
                        </ul>
                    </div>
                    <pre>{{entry.rawText}}</pre> 
                </div>
            </div>
            <div ng-hide="entries.length">
                Unable to collect TNS entries or there were no TNS entries present
            </div>
        </div>
    </div>










    <!-- ////////////////////////////////////////////////////////////////// -->
    <!-- Footer -->
    <!-- ////////////////////////////////////////////////////////////////// -->
    <div class="footer">
        <div class="container">
            <h1> <span class="fa fa-hand-spock-o"></span> </h1>
            Thanks for checking all this out!
            <div>
                <a href="https://twitter.com/brantwills" title="@brantwills" target="_blank"> @brantwills </a> |
                <a href="https://github.com/brantwills/tnsnamer" title="Github" target="_blank"> github source </a>
            </div>
        </div>
    </div>











    <!-- ////////////////////////////////////////////////////////////////// -->
    <!-- Script -->
    <!-- ////////////////////////////////////////////////////////////////// -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular.min.js"></script>
    <script src="js/lib/require.js"></script>
    <script src="js/app/app.js"></script>
    <script src="js/app/tns-controller.js"></script>
    <script src="js/app/tns-directive.js"></script>
    <script src="js/app/tns-filter.js"></script>

</body>
</html>